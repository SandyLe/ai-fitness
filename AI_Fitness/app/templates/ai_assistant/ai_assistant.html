{% extends "main.html" %}

{% block title %}康训智能助手{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/ai_assistant.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
{% endblock %}

{% block content %}
<div class="ai-assistant-container">
  <!-- 侧边栏 - 历史记录 -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h2>历史对话</h2>
    </div>
    <div class="history-list" id="historyList">
      <!-- 历史记录将通过JS动态添加 -->
    </div>
  </div>

  <!-- 主聊天区域 -->
  <div class="chat-area">
    <div class="chat-header">
      <h2>康训智能助手</h2>
      <!-- <button id="add_to_plan_button" class="plan-button" title="将当前对话添加到我的计划">
        <i class="fas fa-calendar-plus"></i> 添加到我的计划
      </button> -->
    </div>
    <!-- 欢迎消息部分 -->
    <div class="conversation" id="conversation">
      <!-- 欢迎消息将在JS中动态添加 -->
    </div>
    
    <div class="loading" id="loading">
      正在思考中<span class="dots"></span>
    </div>
    
    <!-- 快捷提示区域 -->
    <div class="quick-prompts">
      <div class="prompt-chip" data-prompt="帮我制定一个减脂训练计划">减脂训练计划</div>
      <div class="prompt-chip" data-prompt="如何增肌？">增肌指南</div>
      <div class="prompt-chip" data-prompt="推荐一些适合初学者的康训动作">初学者动作</div>
      <div class="prompt-chip" data-prompt="健康饮食有哪些原则？">健康饮食</div>
    </div>
    
    <!-- 输入区域 -->
    <div class="input-area">
      <div class="input-container">
        <textarea class="input-field" id="input_text" placeholder="输入你的问题..." rows="1"></textarea>
        <button class="send-button" id="send_button">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- 隐藏的用户ID字段 -->
<input type="hidden" id="userid" value="{{ user.id|default('0') }}">
{% endblock %}

{% block extra_js %}
<script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js"></script>
<script src="{{ url_for('static', filename='js/ai_assistant.js') }}"></script>
{% endblock %}
